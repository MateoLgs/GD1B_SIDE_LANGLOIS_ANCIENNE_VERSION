
<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Making your first Phaser 3 Game - Part 4</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>
    <div>
        <div>Vies : <span id="vies">5</span></div>
<div>Pièces : <span id="totalPieces">0</span></div>
<span>Froid : </span>
<label id="froidNombre">200</label><span> % </span>
<progress  value="200" max="200" id="froid"></progress>

<script type="text/javascript">
     
    
    

    
    
    
class Menu extends Phaser.Scene {

    constructor () {
        super('Menu');
    }
        preload(){
              this.load.image('Menu', 'assets/menuScreen.jpg');
              this.load.image('menuLevel1Button', 'assets/menuLevel1Button.png');
              this.load.image('menuLevel2Button', 'assets/menuLevel2Button.png');
        }
    create() {

        var menuBackground = this.add.image(600, 400, 'Menu');
        var menuLevel1Button = this.add.image(400, 400, 'menuLevel1Button').setScale(0.5).setInteractive();
        var menuLevel2Button = this.add.image(800, 400, 'menuLevel2Button').setScale(0.5).setInteractive();

  menuLevel1Button.on('pointerdown', () => {
      this.choixMenulevel1Button();
        }) 
        
  menuLevel2Button.on('pointerdown', () => {
      this.choixMenulevel2Button();
        }) 


    }
    choixMenulevel1Button(){
              level="level1"
      this.scene.start('Jeu');
    }

    choixMenulevel2Button(){
        level="level2"
      this.scene.start('Jeu');
    }
    
    
    
}
       
       

class Jeu extends Phaser.Scene{
      constructor () {
        super('Jeu');
      }

    
  lancerSnowballSnowman(snowman){
       var snowball = snowballs.create(this.snowman.x, this.snowman.y, 'snowball');
        snowball.setVelocity(0, 200);
  }
    
  killSnowman(snowman, fireball){
      snowman.destroy();
      fireball.destroy();
  }    
    
  lancerFireballRight(player){
        var bomb = bombs.create(player.x, player.y, 'fireball');
        bomb.setBounce(0.9);
        bomb.body.setAllowGravity(false);
        bomb.setVelocity(700, 0);
}
   
  lancerFireballLeft(player){
      var bomb = bombs.create(player.x, player.y, 'fireball');
        bomb.body.setAllowGravity(false);
        bomb.setVelocity(-700, 0);
}
    
  lancerFireballUp(player){
      var bomb = bombs.create(player.x, player.y, 'fireball');
        bomb.setBounce(0.9);
        bomb.body.setAllowGravity(false);
        bomb.setVelocity(0, -700);
}
    
  lancerFireballDown(player){
      var bomb = bombs.create(player.x, player.y, 'fireball');
        bomb.setBounce(0.9);
        bomb.body.setAllowGravity(false);
        bomb.setVelocity(0, 700);
}   
   
  lancerfireball(player){


         var bomb = bombs.create(player.x, player.y, 'fireball');
        bomb.setBounce(0.9);
        bomb.body.setAllowGravity(false);
    
        var directionFireballPlayer = Math.round(Phaser.Math.Between(0,1))
        
        if(keyQ.isDown){
            directionFireballPlayer=-700;
        }
        else if(keyD.isDown){
            directionFireballPlayer=700;
        }
        else if(keyD.isUp && keyQ.isUp && keyZ.isUp && directionFireballPlayer==1){
            directionFireballPlayer=700;
        }
        else if(keyD.isUp && keyQ.isUp && keyZ.isUp && directionFireballPlayer==0){
            directionFireballPlayer=-700;
        }
    
    
        
        if(cursors.left.isDown){
            directionFireballPlayer=-700;
        }
        else if(cursors.right.isDown){
            directionFireballPlayer=700;
        }
        else if(cursors.left.isUp && cursors.right.isUp && cursors.up.isUp  && directionFireballPlayer==1){
            directionFireballPlayer=700;
        }
        else if(cursors.left.isUp && cursors.right.isUp && cursors.up.isUp && directionFireballPlayer==0){
            directionFireballPlayer=-700;
        }
        
        bomb.setVelocity(directionFireballPlayer, 0);
       
    
      }
 
  destroyFireball(bomb){
    bomb.destroy();
}  

  destroySnowball(snowball){
    snowball.destroy();
}
    
  destroyPlatformFake(platformFake){
      platformFake.disableBody(true, true); 
      //platformFake.disableBody(false, false);
      console.log("destroy")
  }
    
  showPlatformInvisible(platformInvisble){
      platformInvisble.setAlpha(1);
  }    
    
  collectHealthPlayer(powerUpHealth){
    powerUpHealth.destroy();

    //  Add and update the score
    froid.value += 30;
	froidNombre.innerHTML = froid.value;
 
}
    
  collectCoin(coin){
   /* healthAmount-=10
     Health.innerHTML=healthAmount*/
    coin.destroy();
    totalCoins+=1;
    totalPieces.innerHTML=totalCoins
    console.log(totalCoins);
      
}
    
  collectPowerUpFireball(powerUpFireball){
    powerUpFireball.destroy();
    if(fireballPowerUpActive==true){
        machineGunFireballUses+=1;
    }
    fireballPowerUpActive= true;
    console.log('PowerUp fireball Récupéré') ;
}
    
  contactDrapeau(){
    
    if(totalCoins>14){
    console.log('Drapeau Débloqué')
    this.physics.pause();
    return;  
    }
    else {
        console.log('Vous n\'avez que ' + totalCoins +' pièces')
    }
}    

  degatSnowmanJoueur(snowman){
    snowman.destroy();
      if(playerInvincible==false){
     froid.value -= 100;
	froidNombre.innerHTML = froid.value;
      }
      this.playerGoInvincible();
  }
    
  degatSnowballJoueur(snowball){
    snowball.destroy();
    if(playerInvincible==false){
     froid.value -= 50;
	froidNombre.innerHTML = froid.value;
    }
  }
    
  hitBomb (player, bomb){
    death();
}

  setSpeedPlatform (player, platform) {
     runSpeed = 1;
     onPlatform = "platform"
      if(player.body.blocked.down || player.body.touching.down){
       standing=true
      }


}
    
  setSpeedPlatformSnow (player, platform) {

        onPlatform = "snow"
     runSpeed = 0.25;
      if(player.body.blocked.down || player.body.touching.down){
       standing=true
      }
}
    
  setSpeedPlatformIce (player, platform) {
    if(player.body.blocked.down || player.body.touching.down){
       standing=true
      }
  player.setDrag(1)

     onPlatform = "ice"
      console.log(onPlatform)
}
    
  goRight(){
    if(keyQ.isDown){
        player.setVelocityX(0);
         player.anims.play('turn');
    }
      
   else{   
    player.setVelocityX(250*runSpeed);
    player.anims.play('right', true);
   }
}
 
  goLeft(){
    player.setVelocityX(-250*runSpeed);
    player.anims.play('left', true);
}
 
  jump(){
    player.setVelocityY(-500);
      standing=false;
}
    
  playerGoInvincible(){
            playerInvincible=true;
            this.invicibleAfterHitAlpha0;
            this.time.delayedCall(100, this.invicibleAfterHitAlpha1, null, this);
            this.time.delayedCall(200, this.invicibleAfterHitAlpha0, null, this);
            this.time.delayedCall(300, this.invicibleAfterHitAlpha1, null, this);
            this.time.delayedCall(400, this.invicibleAfterHitAlpha0, null, this);
            this.time.delayedCall(500, this.invicibleAfterHitAlpha1, null, this);           this.time.delayedCall(600, this.invicibleAfterHitAlpha0, null, this);
            this.time.delayedCall(700, this.invicibleAfterHitAlpha1, null, this);
            this.time.delayedCall(800, this.invicibleAfterHitAlpha0, null, this);
            this.time.delayedCall(900, this.invicibleAfterHitAlpha1, null, this);
            this.time.delayedCall(1000, this.invisibleOff, null, this);

      
  }

  invisibleOff(){
      playerInvincible=false;
      player.setTint(0xffffff)
  }
    
  invicibleAfterHitAlpha0(){
      player.setAlpha(0);
  }
    
  invicibleAfterHitAlpha1(){
      player.setAlpha(1);
      player.setTint(0xff0000)
  }
    
  death(){
      
      viesRestantes-=1;
      vies.innerHTML=viesRestantes;
    if(viesRestantes>0){
     this.scene.start('Death');
    }
    if(viesRestantes==0){
    this.scene.start('GameOver');
    }
    }

  preload (){
    
    
    
    var powerUpSnow = this.load.image('destroyFireball', 'assets/iceCube.png');
    var powerUpSnow = this.load.image('powerUpSnow', 'assets/iceCube.png');
    var powerUpHealth = this.load.image('powerUpHealth', 'assets/powerUpHealth.png');
    var platformFake = this.load.image('platformFake', 'assets/platformFakeTile.png');
    var platformFake = this.load.image('platformInvisible', 'assets/platformFakeTile.png');
    this.load.image('fireball', 'assets/fireball.png');
    this.load.image('snowball', 'assets/snowball.png');
    this.load.image('bomb', 'assets/bomb.png');
    this.load.image('sky', 'assets/sky.png');
    this.load.image('flag', 'assets/flag.png');
    this.load.image('snowman', 'assets/snowman.png');
    this.load.image('ground', 'assets/platform.png');
    this.load.image('health', 'assets/star.png', { width: 10,  height: 20,});
    this.load.spritesheet('dude1', 'assets/dude1.png', { frameWidth: 32, frameHeight: 48 });
    
    
    
    
     this.load.image('tiles', './assets/tileset_gutter.png');
     this.load.atlas('atlas', 'assets/mario-atlas.png', 'assets/mario-atlas.json');

      

     this.load.tilemapTiledJSON('map1', './assets/level1.json');
     this.load.tilemapTiledJSON('map2', './assets/level2.json');
   

}

  create (){
   
     if(level=="level1"){
           this.map = this.make.tilemap({ key: 'map1' });
      }
      if(level=="level2"){
         this.map = this.make.tilemap({ key: 'map2' });
      }
    
    
    this.tileset = this.map.addTilesetImage('tileset_gutter', 'tiles');
    //var background = this.map.createStaticLayer('back', this.tileset, 0, 0);
    var platform = this.map.createDynamicLayer('platform', this.tileset, 0, 0);
    var platformSnow = this.map.createDynamicLayer('platformSnow', this.tileset, 0, 0);
    var platformIce = this.map.createDynamicLayer('platformIce', this.tileset, 0, 0);

  
   platform.setCollisionByExclusion(-1, true);
   platformSnow.setCollisionByExclusion(-1, true);
   platformIce.setCollisionByExclusion(-1, true);

 
    player = this.physics.add.sprite(25, 220, 'dude1');
    
    
    this.cameras.main.zoom = 2;
  
    this.cursors = this.input.keyboard.createCursorKeys();
    
    //if(player.y<0){
    //   this.cameras.main.startFollow(player, true, 1, 1, 0, -220); 
   // }
    //else {
        this.cameras.main.startFollow(player, true, 1, 0, 0, 0);  
   // }
    
    
      
      
      
      
      
      
          
     ///////////////////////////////////////
    ////////////platformInvisible////////////////////
      
     const platformInvisibleObjects = this.map.getObjectLayer('platformInvisible').objects;
     this.platformInvisible = this.physics.add.group({
            immovable: true,
            allowGravity: false
        });

    for (const platformInvisible of platformInvisibleObjects) {
    this.platformInvisible.create(platformInvisible.x+7, platformInvisible.y-8, 'platformInvisible').setScale(0.4).setAlpha(0)
        .setOrigin(0.5,0.5)
        .setDepth(-1)
     
    }
      
       

    
    for (const platformInvisible of this.platformInvisible.children.entries) {
    platformInvisible.collider = this.physics.add.collider(platformInvisible, player, this.showPlatformInvisible, null, this);
    
}  
      
    
     ///////////////////////////////////////
    ////////////platformFake////////////////////

     const platformFakeObjects = this.map.getObjectLayer('platformFake').objects;
     this.platformFake = this.physics.add.group({
            immovable: true,
            allowGravity: false
        });

    for (const platformFake of platformFakeObjects) {
    this.platformFake.create(platformFake.x+7, platformFake.y-8, 'platformFake').setScale(0.4)
        .setOrigin(0.5,0.5)
        .setDepth(-1)
     
    }
      
       

    
    for (const platformFake of this.platformFake.children.entries) {
    platformFake.collider = this.physics.add.overlap(platformFake, player, this.destroyPlatformFake, null, this);
    
}  
      
      
      
      
      
     ///////////////////////////////////////
    ////////////Snowman////////////////////

     const snowmanObjects = this.map.getObjectLayer('snowman').objects;
     this.snowman = this.physics.add.group({
            immovable: true,
            allowGravity: false
        });

    for (const snowman of snowmanObjects) {
    this.snowman.create(snowman.x, snowman.y-15, 'snowman').setScale(0.05)
        .setOrigin(0.5,0.5)
        .setDepth(-1);
}
      
    

    
    for (const snowman of this.snowman.children.entries) {
    snowman.collider = this.physics.add.overlap(snowman, player, this.degatSnowmanJoueur, null, this);
    
}  
    
    

    ///////////////////////////////////////
    ////////////Pièces////////////////////
    
   const coinObjects = this.map.getObjectLayer('coin').objects;
     this.coins = this.physics.add.group({
            immovable: true,
            allowGravity: false
        });

    for (const coin of coinObjects) {
    this.coins.create(coin.x+8, coin.y-9, 'atlas')
        .setOrigin(0)
        .setDepth(-1);
}
      
    
    this.anims.create({
    key: 'rotate',
    frames: this.anims.generateFrameNames('atlas', {
        prefix: 'mario-atlas_',
        start: 6,
        end: 9,
    }),
    frameRate: 10,
    repeat: -1
});
    
    for (const coin of this.coins.children.entries) {
    coin.collider = this.physics.add.overlap(coin, player, this.collectCoin, null, this);
}
    

    
    ///////////////////////////////////////
    ////////////PowerUpSnow////////////
    
    const powerUpFireballObjects = this.map.getObjectLayer('powerUpFireball').objects;
     this.powerUpFireball = this.physics.add.group({
            immovable: true,
            allowGravity: false
        });

    for (const powerUpFireball of powerUpFireballObjects) {
    this.powerUpFireball.create(powerUpFireball.x+8, powerUpFireball.y-5,'powerUpSnow').setScale(0.3)
        .setOrigin(0.5,0.5)
        .setDepth(-1);

}
        
    
    
    for (const powerUpFireball of this.powerUpFireball.children.entries) {
    powerUpFireball.collider = this.physics.add.overlap(powerUpFireball, player, this.collectPowerUpFireball, null, this);
}

    
     ///////////////////////////////////////
    ////////////PowerUpSnow////////////
    
    const powerUpHealthObjects = this.map.getObjectLayer('powerUpHealth').objects;
     this.powerUpHealth = this.physics.add.group({
            immovable: true,
            allowGravity: false
        });

    for (const powerUpHealth of powerUpHealthObjects) {
    this.powerUpHealth.create(powerUpHealth.x+8, powerUpHealth.y-5,'powerUpHealth').setScale(0.3)
        .setOrigin(0.5,0.5)
        .setDepth(-1);

}
        
    
    
    for (const powerUpHealth of this.powerUpHealth.children.entries) {
    powerUpHealth.collider = this.physics.add.overlap(powerUpHealth, player, this.collectHealthPlayer, null, this);
}
    
        ///////////////////////////////////////
        ////////////arrivée////////////////////
    
     const flagObjects = this.map.getObjectLayer('flag').objects;
     this.flag = this.physics.add.group({
            immovable: true,
            allowGravity: false
        });

    for (const flag of flagObjects) {
    this.flag.create(flag.x+100, flag.y-50, 'flag')
        .setOrigin(0.5,0.5)
        .setDepth(-1);
}
      
    

    
    for (const flag of this.flag.children.entries) {
    flag.collider = this.physics.add.overlap(flag, player, this.contactDrapeau, null, this);
}  
    
    
    
    
        ///////////////////////////////////////
        ///////////////////////////////////////
    

    
    keyM = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.M);
    keyZ = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Z);
    keyS = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S);
    keyD = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D);
    keyQ = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Q);
    //  A simple background for our game
   // this.add.image(400, 300, 'sky');

    //  The platforms group contains the ground and the 2 ledges we can jump on
   // platforms = this.physics.add.staticGroup();

    //  Here we create the ground.
    //  Scale it to fit the width of the game (the original sprite is 400x32 in size)
   // platforms.create(400, 568, 'ground').setScale(2).refreshBody();

    //  Now let's create some ledges
   // platforms.create(600, 400, 'ground');
   // platforms.create(50, 250, 'ground');
   // platforms.create(750, 220, 'ground');

    // The player and its settings

    //  Player physics properties. Give the little guy a slight bounce.
   
    player.setBounce(0.1);
    player.setCollideWorldBounds(false);


    //  Our player animations, turning, walking left and walking right.
    this.anims.create({
        key: 'left',
        frames: this.anims.generateFrameNumbers('dude1', { start: 0, end: 3 }),
        frameRate: 10,
        repeat: -1
    });

    this.anims.create({
        key: 'turn',
        frames: [ { key: 'dude1', frame: 4 } ],
        frameRate: 20
    });

    this.anims.create({
        key: 'right',
        frames: this.anims.generateFrameNumbers('dude1', { start: 5, end: 8 }),
        frameRate: 10,
        repeat: -1
    });

    //  Input Events
    cursors = this.input.keyboard.createCursorKeys();

    //  Some stars to collect, 12 in total, evenly spaced 70 pixels apart along the x axis
  /*  healthPowerUp = this.physics.add.group({
        key: 'health',
        repeat: 0,
        setXY: { x: Phaser.Math.FloatBetween(4, 1000), y: 0, stepX: Phaser.Math.FloatBetween(4, 1000) }
    });*/

   /* healthPowerUp.children.iterate(  (child) {

        //  Give each star a slightly different bounce
        child.setBounceY(Phaser.Math.FloatBetween(0.4, 0.8));

    });*/

    bombs = this.physics.add.group();
    snowballs = this.physics.add.group();
    
    fireball = this.physics.add.group();
    roquettes = this.physics.add.group();
    //  The score
    scoreText = this.add.text(0, -100, 'Level 1', { fontSize: '32px', fill: '#FFF' });

    
    //  Collide the player and the stars with the platforms

    //this.physics.add.collider(healthPowerUp, platform);
    
    this.physics.add.collider(bombs, platform, this.destroyFireball, null, this);
    this.physics.add.collider(bombs, platformIce, this.destroyFireball, null, this);
    this.physics.add.collider(bombs, platformSnow, this.destroyFireball, null, this);
      

      
    this.physics.add.collider(snowballs, platform, this.destroySnowball, null, this);
    this.physics.add.collider(snowballs, player, this.degatSnowballJoueur, null, this);

 //   this.physics.add.collider(fireball, platform);
    
 //   this.physics.add.collider(fireball, platformSnow);


    //  Checks to see if the player overlaps with any of the stars, if he does call the collectStar  
 //   this.physics.add.overlap(player,healthPowerUp , collectHealthPlayer, null, this);

    
    
    
      
    this.physics.add.overlap(this.snowman, bombs, this.killSnowman, null, this);
    
    this.physics.add.collider(player, roquettes, this.hitBomb, null, this);
    
    this.physics.add.collider(player, platform, this.setSpeedPlatform, null, this);
          
    this.physics.add.collider(player, platformSnow, this.setSpeedPlatformSnow, null, this);
    this.physics.add.collider(player, platformIce, this.setSpeedPlatformIce, null, this);
    
    
  
}

  update (){

    //console.log(this.snowman.x)
      
      // this.time.delayedCall(1000, this.lancerSnowballSnowman, null, this);
      
    
    //Autorise les pieces à tourner
    for (const coin of this.coins.children.entries) {
        coin.play('rotate', true);
    }

      if(standing)
    // définie le contact du joueur avec un sol
     standing = player.body.blocked.down || player.body.touching.down;
    
    
    
   if( machineGunFireballActive==true){
       cooldownMachineGunFireball--
   }
    if(cooldownMachineGunFireball<1 && machineGunFireballActive==true ){
      machineGunFireballActive=false;
      cooldownFireball=120
      cooldownMachineGunFireball=360
        console.log("test")
    }
    
    
    
    if(fireballPlayer == false){
     delaiFireballPlayer --
    }
    if (delaiFireballPlayer <= 0 && fireballPlayer == false)  // eg, update every 10 seconds
  {
    delaiFireballPlayer = cooldownFireball;
    fireballPlayer = true;
  }
    
         


    
    if (cursors.right.isDown )
    {
        if(fireballPlayer == true && fireballPowerUpActive==true){
        fireballPlayer = false;
        this.lancerFireballRight(player);
        } 
    }
    
    
    if (cursors.left.isDown )
    {
        if(fireballPlayer == true && fireballPowerUpActive==true){
        fireballPlayer = false;
        this.lancerFireballLeft(player);
        } 
    } 
    
    if (cursors.up.isDown )
    {
        if(fireballPlayer == true && fireballPowerUpActive==true){
        fireballPlayer = false;
        this.lancerFireballUp(player);
        } 
    } 
    
        if (cursors.down.isDown )
    {
        if(fireballPlayer == true && fireballPowerUpActive==true){
        fireballPlayer = false;
        this.lancerFireballDown(player);
        } 
    } 
    
    
    
    
    
    if (keyM.isDown && machineGunFireballActive==false && machineGunFireballUses >0)
    {
        machineGunFireballActive=true;
        cooldownFireball=10
        machineGunFireballUses-=1;
    } 
    
    
    
    
    
    
    
    
    if (keyQ.isDown )
    {
        this.goLeft();
    }
    if (keyD.isDown)
    {
        this.goRight();
    }
    
    
    
    

    if(standing==false){
        jumpingPlayer=true
    }
    
    if (standing==true)
    {
        jumpingPlayer=false
    }

    
    if (keyZ.isDown && jumpingPlayer==false)
    {
        standing = false;
        this.jump();
    }
    


    
    if (keyZ.isUp)
    {
        standing = true
    }
    

    
    
    if (keyD.isUp && keyQ.isUp )
    {
            
        player.setVelocityX(0);

        player.anims.play('turn');
            
    }

    
    
    
    
    if (player.y>600){
        this.death();
    }
    
    if (froid.value<50.1){
        fireballPowerUpActive=false;
    }
    
    if (froid.value<0.1){
        this.death();
    }
    

}


  

}
    
    
    
class Death extends Phaser.Scene {

    constructor () {
        super('Death');
    }
        preload(){
              this.load.image('deathScreen', 'assets/deathScreen.png');
        }
    create() {
        
        var gameOverScreen = this.add.image(600, 400, 'deathScreen').setScale(3);
		this.add.text(0.5, 0.5, 'Death')
      this.time.delayedCall(1500, this.switchDeathToLevel, null, this);
    }
    
    switchDeathToLevel(){
        
          this.scene.start('Jeu');
        
    }
}
    
    
    
    
    
class GameOver extends Phaser.Scene {

    constructor () {
        super('GameOver');
    }
        preload(){
              this.load.image('gameOverScreen', 'assets/gameOverScreen.png');
        }
    create() {
        
        var gameOverScreen = this.add.image(600, 400, 'gameOverScreen').setScale(3);
		this.add.text(0.5, 0.5, 'GAME OVER')
      this.time.delayedCall(2000, this.switchGameOverToMenu, null, this);
    }
    
    switchGameOverToMenu(){
        
 machineGunFireballActive=false,
 cooldownMachineGunFireball = 360,
 machineGunFireballUses = 0,
 cooldownFireball = 120,
 onPlatform ="",
 runSpeed = 1,
 totalCoins=0,
 jumpingPlayer = true,
 fireballPowerUpActive = false,
 fireballPlayer = true ,
 delaiFireballPlayer = 120
    froid.value = 200;
	froidNombre.innerHTML = froid.value;
        level=""
        viesRestantes=5
          this.scene.start('Menu');
        
    }
}
    

    
    var config = {

    type: Phaser.AUTO,
    width: 1280,
    height: 720,
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 1000 },
            debug: false,
            fps: 60
        },
    },
    input: {
        gamepad: true
    },
    scene: [Menu, Jeu, Death, GameOver]

};


var level="level1";

var machineGunFireballActive=false;
var cooldownMachineGunFireball = 360;
var machineGunFireballUses = 3;
var cooldownFireball = 120;
var onPlatform ="";
var bomb;
var snowball;
var runSpeed = 1;
var totalCoins=0;
var player;
var healthAmount = 100;
var health;
var bombs;
var snowballs;
var platforms;
var cursors;
var snowman;
var fireball;
var roquette;
var scoreText;
var roquettes;
var viesRestantes=5;
var jumpingPlayer = true

var fireballPowerUpActive = true
var fireballPlayer = true
    
var delaiFireballPlayer = 120;
var standing;
var keyM
var keyZ;
var keyS;
var keyD;
var keyQ;

var game = new Phaser.Game(config);

var coins;

var playerInvincible=false;
    
        </script>
</script>

</body>
</html>